- prefix: /opt/

- paraview_dependencies:
# - exec_in: apt-get update
#  - exec_in: echo 'APT::Get::Assume-Yes "true";' >> /etc/apt/apt.conf
  - exec_in: apt-get install libxt-dev freeglut3-dev cmake-curses-gui python-dev --assume-yes
  - exec_in: apt-get install mpich libmpich-dev
  - exec_in: apt-get install zlib1g-dev libhdf5-dev hdf5-tools --assume-yes
  - exec_in: apt-get install zlib1g-dev libhdf5-dev hdf5-tools --assume-yes


- paraview_get:
  - exec_in: tar -xzvf /home/lrahmani/packages/ParaView-v5.0.0-source.tar.gz

- paraview_install:
  - exec_in: mkdir ParaView-v5.0.0-build/
  - exec_in: cd ParaView-v5.0.0-build/
  - exec_in: cd ParaView-v5.0.0-build/ && cmake ../ParaView-v5.0.0-source/ -G "Unix Makefiles"    \
    -DPARAVIEW_BUILD_QT_GUI=OFF -DPARAVIEW_ENABLE_CATALYST=ON -DPARAVIEW_ENABLE_PYTHON=ON         \
    -DPARAVIEW_USE_MPI=ON -DCMAKE_INSTALL_PREFIX=/opt/ -DBUILD_TESTING=OFF                        \
    -DPARAVIEW_INSTALL_DEVELOPMENT_FILES=ON -DVTK_USE_X=OFF -DOPENGL_INCLUDE_DIR=/opt/include/GL/ \ 
    -DOPENGL_gl_LIBRARY=/opt/lib/libOSMesa.so -DOPENGL_glu_LIBRARY=/opt/lib/libGLU.so             \
    -DVTK_OPENGL_HAS_OSMESA=ON -DOSMESA_INCLUDE_DIR=/opt/include/GL/ -DOSMESA_LIBRARY=/opt/lib/libOSMesa.so
  - exec_in: cd ParaView-v5.0.0-build/ && make -j24 && make -j24 install

- paraview_exports:
  - exec_in: export CPATH=$CPATH:/usr/include/hdf5/serial/
  - exec_in: export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib/x86_64-linux-gnu/hdf5/serial/
  - exec_in: export LD_LIBRARY_PATH=/opt/lib/paraview-5.0/:$LD_LIBRARY_PATH
  - exec_in: export PYTHONPATH=$PYTHONPATH:/opt/lib/paraview-5.0/site-packages/
  - exec_in: export PYTHONPATH=$PYTHONPATH:/opt/lib/paraview-5.0/
  - exec_in: export PYTHONPATH=$PYTHONPATH::/opt/lib/paraview-5.0/site-packages/vtk

